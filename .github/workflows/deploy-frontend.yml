name: Deploy Frontend to Azure App Services  
  
on:  
  push:  
    branches: [main]  
  pull_request:  
    branches: [main]  
  
env:  
  NODE_VERSION: '22'  
  
jobs:  
  build-and-deploy-frontend:  
    runs-on: ubuntu-latest  
  
    steps:  
      - name: Checkout code  
        uses: actions/checkout@v4  
  
      - name: Set up Node.js  
        uses: actions/setup-node@v4  
        with:  
          node-version: ${{ env.NODE_VERSION }}  
          cache: 'npm'  
          cache-dependency-path: frontend/package-lock.json  
  
      - name: Install frontend dependencies  
        run: |  
          cd frontend  
          npm ci  
  
      - name: Build frontend  
        run: |  
          cd frontend  
          npm run build  
        env:  
          VITE_API_URL: ${{ secrets.AZURE_WEBAPP_URL_BACKEND }}  
  
      - name: Login to Azure  
        uses: azure/login@v1  
        with:  
          creds: ${{ secrets.AZURE_CREDENTIALS }}  
  
      - name: Deploy Frontend to Azure Web App  
        uses: azure/webapps-deploy@v2  
        with:  
          app-name: ${{ secrets.AZURE_WEBAPP_NAME_FRONTEND }}  
          package: './frontend/dist'  
